---
title: bitmap
date: 2016-09-27 15:44:20
tags: [Android]
---
整理了一些在学习和开发中遇到的关于bitmap相关的知识。


---


—inBitmap（2016-09-13）
-----

最近公司需要开发一个可以播放动画的imageView,为了节约内存，每次内存里只存一个bitmap,但是发现memory波动还是比较大，后来研究发现inBitmap可以实现内存块的复用。以下为整理后的知识点。

BitmapFactory.Options 里的inBitmap属性可以实现复用内存块，不需要给这个bitmap重新申请新的内存块，避免了一次内存的分配和回收，从而提高了运行效率。


inBitmap只能在3.0以后使用。


使用inBitmap,在4.4之前（SDK 11- 18），只能重用大小相同的bitmap内存区域。4.4之后可以重用任何bitmap区域内存，只要这个内存比将要分配的bitmap内存大即可。

---


—Bitmap占用内存计算（2016-09-27）
-----


Bitmap占用内存决定因素

－图片的像素点个数

－单位像素占用的字节数

bitmap大小＝图片长度(像素)*图片宽度(像素)*单位像素占用的字节数


单位像素所占的字节数与图片的解码方式有关。


ALPHA_8 只存储透明度信息而无颜色值

ARGB_8888 把每个像素点的透明度，R，G，B色值都用一个byte表示。所以需要4个字节的空间来存储一个像素点。

RGB_565 不存储像素点的透明度，而且用5bit表示R值，6bit表示G值，5bit表示B值，即共16bit，也就是2个字节的空间来存储一个像素点。


所以对同一张图片进行解码时，使用RGB_565的方式解码所占内存空间仅仅是ARGB_8888的50%。